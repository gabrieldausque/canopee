{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft": "Warning",
      "Microsoft.Hosting.Lifetime": "Information"
    }
  },
  "Canopee": {
    "AgentId": "C6367341-9D2E-4842-B066-1FF1CDA3E13B",
    "Trigger": {
      "TriggerType": "HubTrigger",
      "DefaultPipelineId" : "C7F1ADD9-D5B7-40AA-8A50-7E786F1513E8" 
    }
  },
  "Pipelines": [
    {
      "Name": "LocationRepository",
      "Type": "Default",
      "Trigger": {
        "TriggerType": "Once",
        "DueTimeInMs": "2000"
      },
      "Input": {
        "InputType": "CSV",
        "File": "./AgentLocation.csv",
        "FileType": "CSV",
        "FieldSeparator": ";",
        "WithHeader": true
      },
      "Transforms": [],
      "Output": {
        "OutputType": "Elastic",
        "DefaultIndex": "hw-agentlocation",
        "Indexes": [
          {
            "InfosType": "Canopee.StandardLibrary.Inputs.File.RawFileLineInfo",
            "Index": "hw-agentlocation"
          }
        ],
        "Url": "http://localhost:9200"
      }
    },
    {
      "Name": "Hardware",
      "Id" : "399B1569-CC5C-4490-8F64-C1FA351C7736",
      "Type": "Default",
      "Trigger": {
        "TriggerType": "HubTrigger"
      },
      "Input": {
        "InputType": "FromTrigger"
      },
      "Transforms": [
        {
          "TransformType": "ElasticVLookup",
          "Url": "http://localhost:9200",
          "SearchedIndex": "hw-agentlocation",
          "Key": {
            "LocalName": "RPPS",
            "SearchedName": "RPPS"
          },
          "Fields": [
            {
              "SearchedName": "SAPID",
              "LocalName": "SAPID"
            },
            {
              "SearchedName": "CodePostal",
              "LocalName": "PostalCode"
            },
            {
              "SearchedName": "NomPrenom",
              "LocalName": "NomPrenom"
            }
          ]
        },
        {
          "TransformType": "APIGeoGouv",
          "Key": {
            "LocalName": "PostalCode",
            "SearchedName":  "codePostal"
          }
        }
      ],
      "Output": {
        "OutputType": "Elastic",
        "DefaultIndex": "hw-main",
        "Indexes": [
          {
            "InfosType": "Canopee.StandardLibrary.Inputs.Hardware.HardwareInfos",
            "Index": "hw-main"
          },
          {
            "InfosType": "Canopee.StandardLibrary.Inputs.Hardware.DiskInfos",
            "Index": "hw-disks"
          },
          {
            "InfosType": "Canopee.StandardLibrary.Inputs.Hardware.DisplayInfos",
            "Index": "hw-display"
          },
          {
            "InfosType": "Canopee.StandardLibrary.Inputs.Hardware.GraphicalCardInfos",
            "Index": "hw-graphicalcards"
          }
        ],
        "Url": "http://127.0.0.1:9200"
      }
    },
    {
      "Name": "Products",
      "Id": "15B53E41-D3B5-4710-A6B1-A95B456FAE86",
      "Type": "Default",
      "Trigger": {
        "TriggerType": "HubTrigger"
      },
      "Input": {
        "InputType": "FromTrigger"
      },
      "Transforms": [
        {
          "TransformType": "ElasticVLookup",
          "Url": "http://localhost:9200",
          "SearchedIndex": "hw-agentlocation",
          "Key": {
            "LocalName": "RPPS",
            "SearchedName": "RPPS"
          },
          "Fields": [
            {
              "SearchedName": "SAPID",
              "LocalName": "SAPID"
            },
            {
              "SearchedName": "CodePostal",
              "LocalName": "PostalCode"
            },
            {
              "SearchedName": "NomPrenom",
              "LocalName": "NomPrenom"
            }
          ]
        },
        {
          "TransformType": "APIGeoGouv",
          "Key": {
            "LocalName": "PostalCode",
            "SearchedName":  "codePostal"
          }
        }
      ],
      "Output": {
        "OutputType": "Elastic",
        "DefaultIndex": "hw-products",
        "Indexes": [],
        "Url": "http://127.0.0.1:9200"
      }
    },
    {
      "Name": "InstallLogs",
      "Id": "EF62CE59-3087-456E-97C8-523C93578E98",
      "Type": "Default",
      "Trigger": {
        "TriggerType": "HubTrigger"
      },
      "Input": {
        "InputType": "FromTrigger"
      },
      "Transforms": [
        {
          "TransformType": "ElasticVLookup",
          "Url": "http://localhost:9200",
          "SearchedIndex": "hw-agentlocation",
          "Key": {
            "LocalName": "RPPS",
            "SearchedName": "RPPS"
          },
          "Fields": [
            {
              "SearchedName": "SAPID",
              "LocalName": "SAPID"
            },
            {
              "SearchedName": "CodePostal",
              "LocalName": "PostalCode"
            },
            {
              "SearchedName": "NomPrenom",
              "LocalName": "NomPrenom"
            }
          ]
        },
        {
          "TransformType": "APIGeoGouv",
          "Key": {
            "LocalName": "PostalCode",
            "SearchedName":  "codePostal"
          }
        }
      ],
      "Output": {
        "OutputType": "Elastic",
        "DefaultIndex": "hw-installationlogs",
        "Indexes": [],
        "Url": "http://127.0.0.1:9200"
      }
    }
  ]
}
